<Entity tags="enemy,mortal,hittable,homing_target,touchmagic_immunity,polymorphable_NOT,teleportable_NOT,glue_NOT,necrobot_NOT,NEMESIS_ENEMY,matryoshka,nap-powerrangers" name="propane_boy" >

	<AnimalAIComponent 
		_enabled="1"
		ai_state="0"
		ai_state_timer="0"
		preferred_job="JobDefault"
		escape_if_damaged_probability="0"
		attack_if_damaged_probability="100"
		eye_offset_x="0"
		eye_offset_y="0"
		attack_only_if_attacked="0"
		dont_counter_attack_own_herd="0"
		creature_detection_range_x="900"
		creature_detection_range_y="900"
		creature_detection_angular_range_deg="90"
		creature_detection_check_every_x_frames="30"
		max_distance_to_cam_to_start_hunting="300"
		pathfinding_max_depth_no_target="50"
		pathfinding_max_depth_has_target="120"
		aggressiveness_min="100"
		aggressiveness_max="100"
		tries_to_ranged_attack_friends="0"
		attack_melee_enabled="0"
		attack_dash_enabled="0"
		attack_landing_ranged_enabled="0"
		attack_ranged_enabled="1"
		attack_knockback_multiplier="100"
		is_static_turret="0"
		attack_melee_max_distance="15"
		attack_melee_action_frame="5"
		attack_melee_frames_between="0"
		attack_melee_damage_min="0.6"
		attack_melee_damage_max="1.0"
		attack_melee_impulse_vector_x="0"
		attack_melee_impulse_vector_y="0"
		attack_melee_impulse_multiplier="0"
		attack_melee_offset_x="0"
		attack_melee_offset_y="0"
		attack_melee_finish_enabled="0"
		attack_melee_finish_action_frame="2"
		attack_dash_distance="50"
		attack_dash_frames_between="120"
		attack_dash_damage="0.25"
		attack_dash_speed="200"
		attack_dash_lob="0.9"
		attack_ranged_min_distance="0"
		attack_ranged_max_distance="800"
		attack_ranged_action_frame="6"
		attack_ranged_offset_x="1"
		attack_ranged_offset_y="-3"
		attack_ranged_use_message="0"
		attack_ranged_predict="0"
		attack_ranged_entity_file="mods/Nemesis-Ability-Plus/files/entities/projectiles/glowing_ice_bolt.xml"
		attack_ranged_entity_count_min="1"
		attack_ranged_entity_count_max="1"
		attack_ranged_use_laser_sight="1"
		attack_ranged_laser_sight_beam_kind="1"
		attack_ranged_aim_rotation_enabled="0"
		attack_ranged_aim_rotation_speed="3"
		attack_ranged_aim_rotation_shooting_ok_angle_deg="10"
		attack_ranged_state_duration_frames="1"
		hide_from_prey="0"
		hide_from_prey_target_distance="200"
		hide_from_prey_time="300"
		food_eating_create_particles="0"
		eating_area_radius_x="3"
		eating_area_radius_y="8"
		mouth_offset_x="0"
		mouth_offset_y="0"
		defecates_and_pees="0"
		butt_offset_x="0"
		butt_offset_y="0"
		pee_velocity_x="0"
		pee_velocity_y="0"
		needs_food="0"
		sense_creatures="1"
		sense_creatures_through_walls="0"
		can_fly="1"
		can_walk="0"
		path_distance_to_target_node_to_turn_around="0"
		path_cleanup_explosion_radius="6"
		max_distance_to_move_from_home="0"
		food_material="meat"
		attack_ranged_frames_between="160"
		 >
	</AnimalAIComponent>

<!--
		attack_ranged_min_distance="0"
		attack_ranged_max_distance="2000"
		attack_ranged_action_frame="6"
		attack_ranged_offset_x="2"
		attack_ranged_offset_y="-4"
		attack_ranged_predict="1"
		attack_ranged_entity_file="mods/Nemesis-Ability-Plus/files/entities/projectiles/small_ice_propane_tank.xml"
		attack_ranged_use_laser_sight="1"
		attack_ranged_laser_sight_beam_kind="1"
		attack_ranged_state_duration_frames="0"
		attack_ranged_frames_between="360"


		animation_name="attack_ranged"

  	<AIAttackComponent
		min_distance="0"
		max_distance="2000"
		state_duration_frames="80"
		frames_between="360"
		frames_between_global="0"
		attack_landing_ranged_enabled="0"
		attack_ranged_action_frame="6"
		attack_ranged_offset_x="2"
		attack_ranged_offset_y="-4"
		attack_ranged_predict="0"
		attack_ranged_entity_file="mods/Nemesis-Ability-Plus/files/entities/projectiles/small_ice_propane_tank.xml"
		attack_ranged_entity_count_min="1"
		attack_ranged_entity_count_max="1"
		attack_ranged_use_laser_sight="0"
		attack_ranged_aim_rotation_enabled="0"
		attack_ranged_aim_rotation_speed="3"
		attack_ranged_aim_rotation_shooting_ok_angle_deg="10"
		>
	</AIAttackComponent>

  	<AIAttackComponent
		min_distance="0"
		max_distance="2000"
		state_duration_frames="80"
		frames_between="120"
		frames_between_global="0"
		attack_landing_ranged_enabled="0"
		attack_ranged_action_frame="6"
		attack_ranged_offset_x="1"
		attack_ranged_offset_y="-3"
		attack_ranged_predict="0"
		attack_ranged_entity_file="mods/Nemesis-Ability-Plus/files/entities/projectiles/glowing_ice_bolt.xml"
		attack_ranged_entity_count_min="1"
		attack_ranged_entity_count_max="1"
		attack_ranged_use_laser_sight="1"
		attack_ranged_aim_rotation_enabled="0"
		attack_ranged_aim_rotation_speed="3"
		attack_ranged_aim_rotation_shooting_ok_angle_deg="10"
		>
	</AIAttackComponent>
-->

	<SpriteComponent 
		_tags="character"
		_enabled="1" 
		alpha="1" 
		image_file="mods/Nemesis-Ability-Plus/files/enemies_gfx/propane_boy.xml" 
		offset_x="4.5"
		offset_y="14"
		z_index="-1" 
		never_ragdollify_on_death="1"
		next_rect_animation="" 
		rect_animation="walk" 
		 >
	</SpriteComponent>

	<SpriteComponent 
		_tags="laser_sight"
		_enabled="1" 
		alpha="1" 
		image_file="data/particles/laser_blue.png"
		offset_x="5" 
		offset_y="1"
		emissive="1"
		additive="1"
		visible="0"
		update_transform="0"
		next_rect_animation="" 
		rect_animation="default" 
		 >
	</SpriteComponent>

  <!-- AI -->

	<LimbBossComponent
		state="1"
		 >
	</LimbBossComponent>

	<PathFindingComponent 
		can_dive="1" 
		can_fly="1" 
		can_jump="0" 
		can_swim_on_surface="1" 
		can_walk="0" 
		cost_of_flying="500" 
		distance_to_reach_node_x="20" 
		distance_to_reach_node_y="20" 
		frames_between_searches="20" 
		frames_to_get_stuck="120" 
		initial_jump_lob="1" 
		initial_jump_max_distance_x="100" 
		initial_jump_max_distance_y="60" 
		iterations_max_no_goal="9999999" 
		iterations_max_with_goal="145000" 
		jump_speed="200" 
		max_jump_distance_from_camera="400" 
		search_depth_max_no_goal="120" 
		search_depth_max_with_goal="145000" 
		y_walking_compensation="8"
		 >
	</PathFindingComponent>

	<PathFindingGridMarkerComponent 
		_enabled="1" 
		marker_offset_x="0" 
		marker_offset_y="-6" 
		marker_work_flag="16"
		 >
	</PathFindingGridMarkerComponent>

	<GenomeDataComponent 
		food_chain_rank="9" 
		herd_id="boss_limbs" 
		is_predator="1"
		 >
	</GenomeDataComponent>

	<CharacterCollisionComponent 
		getting_crushed_threshold="6"
		moving_up_before_getting_crushed_threshold="6" >
	</CharacterCollisionComponent>

	<CharacterDataComponent 
		check_collision_max_size_x="4" 
		check_collision_max_size_y="4" 
		climb_over_y="4" 
		collision_aabb_min_x="-2.0" 
		collision_aabb_max_x="2.0" 
		collision_aabb_min_y="-3" 
		collision_aabb_max_y="3"
		eff_hg_offset_y="1.28572" 
		eff_hg_position_x="0" 
		eff_hg_position_y="5" 
		eff_hg_size_x="6.42857" 
		eff_hg_size_y="5.14286" 
		eff_hg_velocity_max_x="19.5787896514" 
		eff_hg_velocity_max_y="-11.5714" 
		eff_hg_velocity_min_x="-19.5714" 
		eff_hg_velocity_min_y="-40" 
		eff_hg_damage_min="10"
    		eff_hg_damage_max="95"
		effect_hit_ground="0" 
		gravity="0" 
		buoyancy_check_offset_y="-6">
	</CharacterDataComponent>

	<CharacterPlatformingComponent
		animation_to_play="" 
		jump_keydown_buffer="2" 
		jump_velocity_y="-125" 
		fly_speed_max_up="90"
		fly_speed_max_down="90"
		fly_speed_mult="20"
		fly_speed_change_spd="1"
		mouse_look="0" 
		mouse_look_buffer="1" 
		pixel_gravity="600" 
		run_velocity="36" 
		fly_velocity_x="56" 
		accel_x="0.15" 
		turning_buffer="0.1" 
		velocity_min_x="-50" 
		velocity_max_x="50" 
		velocity_min_y="-200"
		velocity_max_y="350" >
	</CharacterPlatformingComponent>

	<ControlsComponent
		enabled="0" >
	</ControlsComponent>


  <!-- physics -->

	<PhysicsAIComponent
		target_vec_max_len="15.0"
		force_coeff="10.0"
		force_balancing_coeff="0.8"
		force_max="100"
		torque_coeff="50"
		torque_balancing_coeff="4"
		torque_max="50.0"
		damage_deactivation_probability="0"
		damage_deactivation_time_min="2"
		damage_deactivation_time_max="10"
		die_on_remaining_mass_percentage="0.3"
		levitate="1"
		keep_inside_world="1"
		free_if_static="0"
		 >
	</PhysicsAIComponent>


	<PhysicsBodyComponent 
		linear_damping="0" 
		angular_damping="0.02" 
		allow_sleep="1" 
		fixed_rotation="0" 
		is_bullet="0" 
		is_character="1"
		on_death_leave_physics_body="0"
		force_add_update_areas="1"
		 >
	</PhysicsBodyComponent>


	<PhysicsShapeComponent
		is_based_on_sprite="1"
		is_box="1"
		radius_x="4.5"
		radius_y="6"
		friction="0.0"
		restitution="0.3"
		 >
	</PhysicsShapeComponent>


	<ExplodeOnDamageComponent
		explode_on_death_percent="1"
		explode_on_damage_percent="0.0"
		physics_body_modified_death_probability="1.0"
		physics_body_destruction_required="0.3"
		 >
		<config_explosion
			never_cache="0"
			damage="13"
			camera_shake="60" 
			explosion_radius="60" 
			explosion_sprite="data/particles/explosion_032.xml" 
			explosion_sprite_lifetime="10" 
			create_cell_probability="40"
			create_cell_material="blood_cold_vapour"
			hole_destroy_liquid="0" 
			load_this_entity="data/entities/particles/particle_explosion/main_bluesmoke.xml"
			hole_enabled="1" 
			ray_energy="2000000"
			particle_effect="1" 
			damage_mortals="1" 
			physics_explosion_power.min="2.5"
			physics_explosion_power.max="3.5" 
			physics_throw_enabled="1"
			shake_vegetation="1" 
			sparks_count_min="15" 
			sparks_count_max="20"
			spark_material="plasma_fading"
			sparks_enabled="1" 
			stains_enabled="1" 
			stains_radius="15" 
			delay.min="1"
			delay.max="4"
			explosion_delay_id="1"
			audio_event_name="explosions/propane_tank"
			 >
		</config_explosion>
	</ExplodeOnDamageComponent>

  <!-- damage -->

	<DamageModelComponent 
		hp="15" 
		falling_damages="0"
		physics_objects_damage="0"
		materials_that_damage="acid,lava,magic_liquid_mana_regeneration,poison" 
		materials_how_much_damage="0.004,0.004,0.004,0.001"
		ragdoll_filenames_file="" 
		ragdoll_material=""
		blood_material="blood_cold_vapour"
		blood_spray_material="blood_cold_vapour"
		fire_probability_of_ignition="0"
		physics_objects_damage="0"
		air_needed="0"
		critical_damage_resistance="1.0"
		blood_sprite_directional=""
		blood_sprite_large=""
		minimum_knockback_force="100000"
		 >
		<damage_multipliers
			projectile="0.05"
			electricity="3.0"
			drill="3.0"
			explosion="3.0"
			ice="0.05"
			radioactive="0.0"
			holy="3.0"
			 >
		</damage_multipliers>
	</DamageModelComponent>

	<GameEffectComponent 
		effect="PROTECTION_FREEZE"
		frames="-1"
		 >
	</GameEffectComponent >

	<GameEffectComponent 
		effect="STUN_PROTECTION_ELECTRICITY"
		frames="-1"
		 >
	</GameEffectComponent >
		
	<HitboxComponent 
		_enabled="1" 
		aabb_min_x="-4.5" 
		aabb_max_x="4.5" 
		aabb_min_y="-14" 
		aabb_max_y="2" 
		is_enemy="1" 
		is_item="0" 
		is_player="0"
		 >
	</HitboxComponent>

  <!-- etc -->

	<AudioComponent 
		file="data/audio/Desktop/animals.bank"
		event_root="animals"
		 >
	</AudioComponent>

	<SpriteAnimatorComponent 
		rotate_to_surface_normal="0"
		 >
	</SpriteAnimatorComponent>

	<LuaComponent 
		script_source_file="mods/Nemesis-Ability-Plus/files/scripts/vapour_trail.lua"
		execute_every_n_frame="12"
		>
	</LuaComponent>

	<LuaComponent
		script_source_file="mods/Nemesis-Ability-Plus/files/scripts/animals/propane_boy_chase.lua"
		execute_every_n_frame="1"
		>
	</LuaComponent>

	<LuaComponent
		script_source_file="mods/Nemesis-Ability-Plus/files/scripts/animals/propane_boy_chase_flag.lua"
		execute_every_n_frame="30"
		>
	</LuaComponent>

	<LuaComponent
		execute_every_n_frame="-1"
		script_damage_received="mods/Nemesis-Ability-Plus/files/scripts/animals/propane_boy_damage.lua"
		>
	</LuaComponent>

	<AreaDamageComponent
		aabb_min.x="-6" 
		aabb_min.y="-10" 
		aabb_max.x="6" 
		aabb_max.y="10" 
		damage_per_frame="0.02"
		update_every_n_frame="8"
		entities_with_tag="human"
		damage_type="DAMAGE_CURSE"
		>
	</AreaDamageComponent>

  <!-- limbs -->

	<Entity name="limb_attacker1">
		<InheritTransformComponent>
			<Transform position.x="-0.5"  position.y="1.5" />
		</InheritTransformComponent>
		<Base file="mods/Nemesis-Ability-Plus/files/entities/propane_boy/propane_boy_limb_left.xml" />
	</Entity>

	<Entity name="limb_attacker2">
		<InheritTransformComponent>
			<Transform position.x="0.5"  position.y="1.5" />
		</InheritTransformComponent>
		<Base file="mods/Nemesis-Ability-Plus/files/entities/propane_boy/propane_boy_limb_right.xml" />
	</Entity>

	<Entity name="limb_attacker3">
		<InheritTransformComponent>
			<Transform position.x="0"  position.y="5" />
		</InheritTransformComponent>
		<Base file="mods/Nemesis-Ability-Plus/files/entities/propane_boy/propane_boy_dark_limb_attacker.xml" />
	</Entity>

	<!-- arms -->

	<Entity>
		<Base file="data/entities/misc/monk_arm.xml">
		</Base>

		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
	</Entity>

	<Entity>
		<Base file="data/entities/misc/monk_arm.xml">
			<SpriteComponent
				has_special_scale="1"
				special_scale_x="-1" >
			</SpriteComponent>
			<VariableStorageComponent
				value_bool="0">
			</VariableStorageComponent>
		</Base>

		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
		<Entity tags="arm_fx">
			<Base file="data/entities/misc/monk_arm_fx.xml" />
		</Entity>
	</Entity>
<!--
	<MagicConvertMaterialComponent
		from_material="rock_box2d_hard"
		to_material="blood_cold"
		steps_per_frame="15"
		loop="1"
		is_circle="1"
		radius="15"
		 >
	</MagicConvertMaterialComponent>

	<MagicConvertMaterialComponent
		from_material="rock_box2d"
		to_material="blood_cold"
		steps_per_frame="10"
		loop="1"
		is_circle="1"
		radius="30"
		 >
	</MagicConvertMaterialComponent>

	<MagicConvertMaterialComponent
		from_material="gold_box2d"
		to_material="air"
		steps_per_frame="5"
		loop="1"
		is_circle="1"
		radius="40"
		 >
	</MagicConvertMaterialComponent>

	<MagicConvertMaterialComponent
		from_material="bloodgold_box2d"
		to_material="air"
		steps_per_frame="5"
		loop="1"
		is_circle="1"
		radius="40"
		 >
	</MagicConvertMaterialComponent>
-->
	<MagicConvertMaterialComponent
		from_material_array="rock_box2d_hard,rock_box2d,gold_box2d,bloodgold_box2d"
		to_material_array="blood_cold,blood_cold,air,air"
		steps_per_frame="5"
		loop="1"
		is_circle="1"
		radius="40"
		 >
	</MagicConvertMaterialComponent>

	<MagicConvertMaterialComponent
		stain_frozen="1"
		from_material="water"
		to_material="water_ice"
		steps_per_frame="5"
		loop="1"
		is_circle="1"
		radius="14"
		 >
	</MagicConvertMaterialComponent>

	<CellEaterComponent
		eat_probability="8"
		radius="11"
		ignored_material="steel"
		 >
	</CellEaterComponent>

</Entity>